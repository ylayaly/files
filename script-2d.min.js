var show_zero_price="",slidesT=["size","exterior","interior","layout","installation","summary"],$slide=$(".configuration-slide"),zz="22EP8BJUJKCW2YGUN8RS",hc="w-condition-invisible",sB=["upgrades","interior","services","exterior","layout"],sC=["price","model","load"],ccI=".collection-item",ccW=".collection-selection-wrapper",ccF="#model-item-selection",ccFM="#model-item-selection-multiple",ccM=".title-section",ccS=".summary-studio",formatter=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0});function init(){var sections={m:[],exterior:[],interior:[],layout:[],upgrades:[],services:[]},currencys=[];setTimeout((function(){$(".div-block-257").removeClass("hidden")}),300),$(".models").each((function(){sections.m.push({type:$(this).data("type"),name:$(this).data("name"),slug:$(this).data("slug"),price:$(this).data("price"),image:$(this).data("image")})})),$(".rendered-sections").each((function(){var type=$(this).data("type").toLowerCase(),description=$(this).closest(".w-dyn-item").find(".longer-description-html").html(),st=$(this).data("subtype"),exist_subtype=sections[type].find((function(item){return item.subtype==st})),selection=$(this).data("selection").toLowerCase();selection=selection.includes("simple")?"simple":"multiple";var active=!exist_subtype&&"simple"==selection;sections[type].push({type:$(this).data("type"),subtype:$(this).data("subtype"),namesubtype:$(this).data("namesubtype"),name:$(this).data("name"),slug:$(this).data("slug"),price:$(this).data("price"),image:$(this).data("image"),thumbnail:$(this).data("thumbnail"),description:description,active:active,show:!1,order:$(this).data("order"),selection:selection,object:$(this).data("object"),group:$(this).data("group"),material:$(this).data("material"),function:$(this).data("function")})}));var parentHTML=$(ccM).parent().find(ccW).length>0?$(ccM).parent().find(ccW)[0].outerHTML:wrapperDefault,item=$(ccF).length>0?$(ccF)[0].outerHTML:itemDefault;$(ccM).parent().find(ccW).remove(),$(ccF).remove();var itemM=$(ccFM).length>0?$(ccFM)[0].outerHTML:itemDefault;for(var s in $(ccFM).remove(),$(".btn-slides").each((function(i){$(this).find(".nav-bar-click-link").each((function(j){$(this).attr("x-bind:class","{'selected' : slideActive == '"+j+"', 'not-selective-link' : slideActive < '"+j+"'}")}))})),$(".button-wrapper").find("a").attr("x-bind:class",'{"invalid" : !valid}'),sections)if("m"!=s&&"services"!=s){var section=sections[s],subtypes=[],j=0;section.map((function(tag){if(!subtypes.find(st=>st.value===tag.subtype)){var items=section.filter(st=>st.subtype===tag.subtype);subtypes.push({value:tag.subtype,title:tag.namesubtype,items:items})}})),subtypes.map((function(st){var $parentHTML=$(parentHTML);$parentHTML.find(".title-subsection").text(st.title);var parentClass,htmlItems='<div role="list" class="'+$parentHTML.find(".items-section").attr("class")+'">';st.items.map((function(it){var $item="simple"==it.selection?$(item):$(itemM);$item.removeAttr("id");var vectary_function=it.function.toLowerCase().replace(" ","-");$item.attr("data-object",it.object).attr("data-group",it.group).attr("data-material",it.material).attr("data-function",it.function).addClass(vectary_function),$item.find("img.image").attr("src",it.thumbnail).attr("srcset",it.thumbnail),$item.find(".text-block").text(it.name),$item.find(".long_description").html(it.description),$item.find(".btn-details").attr("x-on:click",`showPop('${s}', ${j})`),$item.find(".details").attr("x-bind:class",'{"show" : studio.'+s+".selected["+j+"].show}").attr("x-on:click",`hidePop('${s}', ${j})`),j++;var $p=$item.find(".text-price"),h_price=$p.html();h_price&&(h_price=h_price.replace("{price}",it.price),$p.html(h_price),$item.find(".text-price span").attr("x-text","setCurrencyPrice("+it.price+", '+ $')")),0===it.price&&$p.addClass(hc),""==it.description&&$item.find(".btn-details").css({display:"none"}),it.active&&$item.addClass("selected"),$item.attr("data-selection",it.selection),$item.find(".w-embed span").attr("data-name",it.name).attr("data-type",it.type),htmlItems+=$item[0].outerHTML})),htmlItems+="</div>",$parentHTML.find(".w-dyn-list").html(htmlItems),$("."+s+" "+ccM).parent().append($parentHTML)}))}$("input:required").attr("x-on:input","validate()"),$("form").attr("x-on:keydown.enter.prevent",""),$("#next-button").attr("href","javascript:void(0)"),$("form").attr("x-on:submit","submit(event)"),$(".currency-link").each((function(){var dataC=$(this).parent().find(".currency").data();$(this).attr("x-on:click",`changeCurrency('${dataC.currency}')`),currencys[dataC.currency]=dataC.value})),$(".p-currency").each((function(){var text=$(this).text();$(this).attr("x-text",`setCurrencyPrice('${text}')`)}));var imgshipping=$("#shipping-img").attr("src"),iSlide=0;$(".div-block-257 a").each((function(){var j=$(this).parent().find("a").length;iSlide==j&&(iSlide=0),$(this).attr("x-on:click","goSlide("+iSlide+")"),iSlide++}));var classitemOrder=$(ccS).length>0?$(ccS).children(":first-child").attr("class"):"summary-studio w-dyn-items",itemOrder=$(ccS).children().length>0?$(ccS).children(":first-child")[0].outerHTML:$(itemSummaryDefault)[0].outerHTML,$itemOrder=$(itemOrder),templateCustomOrder="";templateCustomOrder+='<template role="listitem" class="'+classitemOrder+'" x-for="item in studioItems" :key="item">',$itemOrder.find(".div-block-295").attr("x-bind:class","{'hidden' : item.type == 'model'}"),$itemOrder.find("img").attr("x-show","item.thumbnail").attr("x-bind:src","item.thumbnail").attr("x-bind:srcset","item.thumbnail"),$itemOrder.find(".price-text").attr("x-text","formatMoney(setCurrencyPrice(item.price), false)").removeClass(hc),$itemOrder.find(".title-tag").attr("x-text","item.name"),$itemOrder.find(".div-block-295").append(summaryHTML),templateCustomOrder+=$itemOrder.html()+"</template>",$(".custom-items").html(templateCustomOrder);let model=window.location.pathname;model=model.split("/").pop();var modelSelected=sections.m.find((function(m){return m.slug==model})),studio={model:modelSelected,price:formatter.format(modelSelected.price),load:0};for(sec in sections)"m"!=sec&&(studio[sec]={active:sections[sec].length>0?sections[sec][0]:{image:null,price:0},selected:sections[sec]});return{sections:sections,studio:studio,studioItems:[],active:!0,shipping:0,customer:customer,upgradesV:"",servicesV:"",interiorV:"",layoutV:"",exteriorV:"",valid:!0,currency:"USD",slideActive:0,summarySlide:slidesT.length-1,installationSlide:slidesT.length-2,init:function(){history.pushState(null,"","#size"),this.renderSelection(),this.studio.price=formatter.format(this.setCurrencyPrice(modelSelected.price)),this.setPrice();var _this=this;$slide.on("beforeChange",(function(e,s,c,nS){var uri=window.location.href;uri=uri.split("#")[0],_this.slideActive=nS,history.pushState({},null,uri+"#"+slidesT[nS])}))},setStudio:function(event){var $span=$(event.target).find(".w-embed span"),target=event.target;if($span.length<=0&&($span=$(event.target).closest(".detail").parent().find(".w-embed span"),target=$(event.target).closest(ccI)),$span.length<=0&&($span=$(event.target).parent().find(".w-embed span"),target=$(event.target).closest(ccI)),$span.length<=0&&$(event.target).closest(".detail").length>0&&(target=$(event.target).closest(ccI),$span=$(target).find(".w-embed span")),$span.length>0&&!$(event.target).hasClass("text-details")&&!$(event.target).hasClass("image-3")){var name=$span.data().name,type=$span.data().type.toLowerCase(),tag,item=sections[type].find((function(i){return i.name==name}));if($(target).find(".section-3d").addClass("active"),"multiple"==item.selection)$(target).toggleClass("selected"),this.studio[type].selected.map((function(i){return i.name==name&&(i.active=!i.active),i}));else if("simple"==item.selection){$(target).parent().find("div").removeClass("selected"),$(target).addClass("selected");var subtype=item.subtype;this.studio[type].selected.map((function(i){return i.subtype==subtype&&(i.active=!1),i.name==name&&(i.active=!i.active),i}))}this.studio[type].active=item,this.setPrice(),this.renderSelection()}},setPrice:function(){var total=modelSelected.price;for(const i in this.studio){var item=this.studio[i];if("model"!=i)if(null!=item.price)total=parseFloat(total)+parseFloat(item.price);else for(const j in this.studio[i].selected){var itemJ=this.studio[i].selected[j];itemJ.active&&(total=parseFloat(total)+parseFloat(itemJ.price))}}total=parseFloat(total)+parseFloat(this.shipping),this.studio.price=formatter.format(this.setCurrencyPrice(total)),this.setLoan(total)},setLoan:function(total){var tax=(parseFloat(8)+parseFloat(2.9)+parseFloat(2))/100,interest_rate=.0689,total_porcentage=Math.pow(1+.0689/12,-60);total_porcentage=total*(.0689/12)/(1-total_porcentage),total_porcentage=parseFloat(total_porcentage)+parseFloat(total*tax/60),total_porcentage=this.setCurrencyPrice(total_porcentage),this.studio.load=formatter.format(total_porcentage)+"/mo"},goSlide:function(slide){"next"==slide&&(slide=this.valid?parseInt(this.slideActive)+1:this.slideActive),this.valid=!0;var inputs=$("input:required").filter((function(i,elem){return""==$(elem).val()}));slide==this.summarySlide&&(inputs.length>0?this.valid=!1:this.valid=!0),this.valid&&$("#slick-slide-control0"+slide).click(),slide==this.installationSlide&&inputs.length>0&&(this.valid=!1)},renderSelection(){this.studioItems=[];var b=sB,c=sC;for(const i in this.studio){var item=this.studio[i],value=[];if(!c.includes(i)&&null!=item&&b.includes(i)){var items=item.selected.filter((function(iJ){return iJ.active}));for(const j in items){value.push(items[j].name);let renderitem={type:items[j].type,name:items[j].name,slug:items[j].slug,price:items[j].price,image:items[j].image?items[j].image:null,thumbnail:items[j].thumbnail?items[j].thumbnail:null};this.studioItems.push(renderitem)}this[i+"V"]=value.join(", ")}}this.studioItems.push({type:"shipping",name:"Estimated shipping",price:this.shipping,image:"",thumbnail:imgshipping}),this.studioItems.push(modelSelected)},formatMoney:function(price,show=!0){return show?formatter.format(price):0==price?show_zero_price:formatter.format(price)},changeZip:function(event){var zip_init=$("#zip-init").text(),zip_price=$("#zip-price").text(),zip=event.target.value,_this=this;""!=zip?$.get("https://api.zip-codes.com/ZipCodesAPI.svc/1.0/CalculateDistance/ByZip?fromzipcode="+zip_init+"&tozipcode="+zip+"&key="+zz).done((function(res){res.DistanceInMiles||0==res.DistanceInMiles?(_this.shipping=parseFloat(res.DistanceInMiles)*parseFloat(zip_price),_this.setPrice(),_this.renderSelection()):(_this.shipping=0,_this.renderSelection())})):(_this.shipping=0,_this.renderSelection())},validate:function(){var inputs;0==$("input:required").filter((function(i,elem){return""==$(elem).val()})).length?this.valid=!0:this.valid=!1},validateForm:function(){var slideActive,i=$(".w-slider-dot.w-active").index(),inputs;(i=parseInt(i)+parseInt(1))!=installationSlide?this.goSlide(i):0==$("input:required").filter((function(i,elem){return""==$(elem).val()})).length&&this.goSlide(i)},submit:function(event){var data=$("form").serialize();data=window.btoa(data);var sTags=JSON.stringify(this.studioItems),t=window.btoa(sTags);return $(document).ajaxComplete((function(){window.location.href="/thank-you?s="+data+"&t="+t})),!1},changeCurrency:function(c){this.currency=c,this.setPrice(),$(document).find(".w-dropdown").each((function(i,el){$(el).triggerHandler("w-close.w-dropdown")}))},setCurrencyPrice:function(p,symbol=""){return symbol+" "+(p/currencys[this.currency]).toFixed(0)},showPop:function(s,i){this.studio[s].selected[i].show=!0},hidePop:function(s,i){this.studio[s].selected[i].show=!1}}}$(()=>{console.log("Run"),$slide.slick({dots:!0,infinite:!1,arrows:!1,speed:500,fade:!0,cssEase:"linear"}),$("#open-3d-modal").click((function(){$(".modal-pop-up._3d-model").removeClass("no-visible")})),$("#close-3d-modal").click((function(){$(".modal-pop-up._3d-model").addClass("no-visible")}))});